(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{470:function(a,s,t){"use strict";t.r(s);var e=t(1),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[a._v("#")]),a._v(" 注意事项")]),a._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),t("p",[a._v("本章节主要介绍，升级至不同版本所需要注意的事项，以减少版本差异带来的系统运行,配置部署问题。")]),a._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[a._v("警告")]),a._v(" "),t("p",[a._v("当你更新代码后，发现版本号有变化，需要重新编译工程代码，进行重新部署后再使用。")])]),a._v(" "),t("h2",{attrs:{id:"v2-5-5-0-版本注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#v2-5-5-0-版本注意事项"}},[a._v("#")]),a._v(" v2.5.5.0 版本注意事项")]),a._v(" "),t("p",[a._v("v2.5.5.0 版本以前，"),t("strong",[a._v("Eurynome Cloud")]),a._v(" 数据库初始化主要采用业务表自动创建和OAuth2部分表手工创建的方式。为了让数据库初始化工作更加便捷，v2.5.5.0 版本将原有需要手工创建的OAuth2数据表，全部改造为自动创建。")]),a._v(" "),t("p",[a._v("OAuth2中，涉及数据库操作部分的代码，完全采用纯"),t("code",[a._v("JDBC")]),a._v(",使用原生SQL的方式实现。原生SQL的方式导致SQL语句中各个数据库字段的名称，一定要与实际数据库表字段对应，而且大小写敏感。OAuth2 所有业务表中，90%的字段都是使用小写字母定义，剩余的字段中会存在大小写混合的情况。而使用"),t("code",[a._v("Spring Data JPA")]),a._v("的自动建表机制，会统一使用小写字母进行建表，这样就会导致OAuth2部分业务失效。")]),a._v(" "),t("h3",{attrs:{id:"_1-一定要修改nacos配置后再运行服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-一定要修改nacos配置后再运行服务"}},[a._v("#")]),a._v(" [1]一定要修改Nacos配置后再运行服务")]),a._v(" "),t("p",[a._v("如果您现在使用的系统，主要是为了研究和学习，没有实际应用的数据。那么建议在工程 "),t("code",[a._v("${project_home}/platform/eurynome-cloud-management/resources/imports")]),a._v(" 目录下找到最新版本的Nacos配置，重新导入Nacos的配置，这样就不会出现上述问题。")]),a._v(" "),t("p",[a._v("如果已经在使用本系统，建议以最小化的方式修改Nacos配置后再使用系统。")]),a._v(" "),t("p",[a._v("在Nacos中，找到"),t("code",[a._v("eurynome-cloud-database.yaml")]),a._v("，修改配置"),t("code",[a._v("spring.jpa.hibernate.naming.physical-strategy")]),a._v("。")]),a._v(" "),t("p",[t("strong",[a._v("修改前")])]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jpa")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("hibernate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("naming")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("physical-strategy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[t("strong",[a._v("修改后")])]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("jpa")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("hibernate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("naming")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("physical-strategy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" cn.herodotus.eurynome.data.jpa.hibernate.HerodotusPhysicalNamingStrategy\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);