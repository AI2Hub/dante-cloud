(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{464:function(s,a,t){"use strict";t.r(a);var e=t(1),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"添加模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加模块"}},[s._v("#")]),s._v(" 添加模块")]),s._v(" "),t("h2",{attrs:{id:"添加一般模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加一般模块"}},[s._v("#")]),s._v(" 添加一般模块")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("在"),t("code",[s._v("packages")]),s._v("目录下，任意位置，新建模块目录。例如：moduleA")])]),s._v(" "),t("li",[t("p",[s._v("请参考已有模块，在目录 moduleA 下，新建文件 "),t("code",[s._v("package.json")]),s._v(", "),t("code",[s._v("rollup.config.js")]),s._v(", "),t("code",[s._v("tsconfig.json")])])])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("package.json")]),s._v(": Node 工程基础配置")]),s._v(" "),t("li",[t("code",[s._v("rollup.config.js")]),s._v(": Rollup 本模块配置文件")]),s._v(" "),t("li",[t("code",[s._v("tsconfig.json")]),s._v(": Typescript 本模块配置文件")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[t("code",[s._v("package.json")]),s._v(" 中一定要指定 "),t("code",[s._v("name")]),s._v(" 的值。这个值就是以后引用模块，编译模块的核心名称。其它配置请结合实际进行修改和配置。")])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("在目录 moduleA 下，新建文件夹 "),t("code",[s._v("src")]),s._v(", "),t("code",[s._v("types")])])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("src")]),s._v(": 源代码放置目录，可以根据自身需求修改。")]),s._v(" "),t("li",[t("code",[s._v("types")]),s._v(": Typescript 定义文件放置目录，可以根据自身需求修改。")])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("在工程中找到"),t("code",[s._v("${project_home}/package.json")]),s._v("。在 "),t("code",[s._v("workspaces")]),s._v("属性中添加新增模块的目录。")])]),s._v(" "),t("p",[s._v("以目录 moduleA 为例，在 "),t("code",[s._v("workspaces")]),s._v(" 中添加如下目录配置。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("   "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"workspaces"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"packages/moduleA"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        ···\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("以上工作完成之后，就可以在控制台中，通过以下命令，执行新增模块的相关命令。")])]),s._v(" "),t("p",[s._v("假设目录 moduleA 中的模块，名称为 "),t("code",[s._v("@hecate/moduleA")]),s._v("。通过以下命令执行相关操作。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" workspace @hecate/moduleA XXX\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("说明")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("workspace")]),s._v(": 因为工程中有多个模块，通过该参数进行区分")]),s._v(" "),t("li",[t("code",[s._v("@hecate/moduleA")]),s._v(": 就是在该模块下，"),t("code",[s._v("package.json")]),s._v(" 中 "),t("code",[s._v("name")]),s._v(" 属性值。")]),s._v(" "),t("li",[t("code",[s._v("XXX")]),s._v(": 代表的是，在该模块下"),t("code",[s._v("package.json")]),s._v(" 中 "),t("code",[s._v("scripts")]),s._v(" 属性中定义的命令")])])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("定义简化命令")])]),s._v(" "),t("p",[s._v("上一步中，执行的命令比较长，不方便记忆和使用。可以在工程中找到"),t("code",[s._v("${project_home}/package.json")]),s._v("，在其中"),t("code",[s._v("scripts")]),s._v(" 属性中定义简化命令，实现简化命令与一个或多个模块内命令的映射。")]),s._v(" "),t("p",[s._v("例如：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"workspaces"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"packages/moduleA"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        ···\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"h:mA"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yarn workspace @hecate/moduleA"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        ···\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("那么，执行以下命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" h:mA XXX\n\n// 等价于\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" workspace @hecate/moduleA XXX\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("blockquote",[t("p",[s._v("以上只是示例，可以结合实际定义自己的简化命令。")])]),s._v(" "),t("ol",{attrs:{start:"7"}},[t("li",[s._v("其它模块应用该模块。")])]),s._v(" "),t("p",[s._v("可以通过以下命令，实现其它模块对该模块的依赖引用。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("// 将模块@hecate/moduleA 添加到 模块中@hecate/moduleA\nlerna "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" @hecate/moduleA --scope @hecate/moduleB\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"添加vue工程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加vue工程"}},[s._v("#")]),s._v(" 添加Vue工程")]),s._v(" "),t("p",[s._v("将一个单独的Vue工程，添加到工程中，作为一个模块使用。具体方法与 "),t("a",{attrs:{href:"#%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%88%AC%E6%A8%A1%E5%9D%97"}},[s._v("添加一般模块")]),s._v(" 类似。")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("新建一个Vue工程，使用 Vue Cli 或任意你喜欢的方式都可以。")])]),s._v(" "),t("li",[t("p",[s._v("在"),t("code",[s._v("packages")]),s._v("目录下，任意位置，新建模块目录。")])]),s._v(" "),t("li",[t("p",[s._v("将刚刚新建的Vue工程代码拷贝至，新建的模块目录下。")])]),s._v(" "),t("li",[t("p",[s._v("按照"),t("a",{attrs:{href:"#%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%88%AC%E6%A8%A1%E5%9D%97"}},[s._v("添加一般模块")]),s._v("中，第4~7步的说明，同样操作一遍即可。")])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("说明")]),s._v(" "),t("p",[s._v("使用 Vue Cli 会新建标准的 Vue 工程，"),t("code",[s._v("package.json")]),s._v(" 中会包含完整的依赖包。只用 "),t("code",[s._v("Monorepo")]),s._v(" 方式管理项目，可以将共性的依赖包放到模块外部进行统一管理，各个模块只需要管理自身所需要的依赖包即可。")]),s._v(" "),t("p",[s._v("因此，可以对比 "),t("code",[s._v("@herodotus/ui")]),s._v(" 模块的 "),t("code",[s._v("package.json")]),s._v(" 的依赖定义，将新建的 Vue工程中，重复的依赖去掉。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);