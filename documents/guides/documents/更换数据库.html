<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.25">
    <link rel="icon" href="/eurynome-cloud/images/logo.png"><meta name="keywords" content="Eurynome Cloud,微服务,Spring Boot,Spirng Cloud,Spring Cloud Alibaba,Spring Security,OAuth2,Nacos,Skywalking"><script>var _hmt = _hmt || [];
            (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?376190fed0f613f413a39d7aa19f387d";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();</script><title>更换数据库 | Eurynome Cloud</title><meta name="description" content="Eurynome Cloud, 在线文档, 微服务, 微服务架构, Spring Boot，Spring Cloud，Spring Cloud Alibaba, Spring Security, OAuth 2, Skywalking, Nacos">
    <link rel="preload" href="/eurynome-cloud/assets/js/runtime~app.64d35c83.js" as="script"><link rel="preload" href="/eurynome-cloud/assets/css/styles.03bfbc71.css" as="style"><link rel="preload" href="/eurynome-cloud/assets/js/567.94e28fdc.js" as="script"><link rel="preload" href="/eurynome-cloud/assets/js/app.a2a09456.js" as="script">
    <link rel="stylesheet" href="/eurynome-cloud/assets/css/styles.03bfbc71.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/eurynome-cloud/" class=""><img class="logo" src="/eurynome-cloud/images/logo.png" alt="Eurynome Cloud"><span class="site-name can-hide">Eurynome Cloud</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/eurynome-cloud/documents/" class="nav-link router-link-active" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/eurynome-cloud/documents-athena/" class="nav-link" aria-label="单体版"><!--[--><!--]--> 单体版 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/eurynome-cloud/microservices/" class="nav-link" aria-label="微服务技术栈"><!--[--><!--]--> 微服务技术栈 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="了解更多"><span class="title">了解更多</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="了解更多"><span class="title">了解更多</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>延伸</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/eurynome-cloud/basic-knowledge/" class="nav-link" aria-label="了解基础知识"><!--[--><!--]--> 了解基础知识 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>帮助</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a class="nav-link external" href="https://gitee.com/herodotus/eurynome-cloud/issues" rel="noopener noreferrer" target="_blank" aria-label="我要提问"><!--[--><!--]--> 我要提问 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/eurynome-cloud/others/README.md" class="nav-link" aria-label="常见问题"><!--[--><!--]--> 常见问题 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/eurynome-cloud/others/更新日志.md" class="nav-link" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a class="nav-link external" href="https://jq.qq.com/?_wv=1027&amp;k=bIerJVy8" rel="noopener noreferrer" target="_blank" aria-label="加入QQ群"><!--[--><!--]--> 加入QQ群 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Gitee"><span class="title">Gitee</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Gitee"><span class="title">Gitee</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://gitee.com/herodotus/eurynome-cloud" rel="noopener noreferrer" target="_blank" aria-label="后端源码"><!--[--><!--]--> 后端源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://gitee.com/herodotus/eurynome-cloud-ui" rel="noopener noreferrer" target="_blank" aria-label="前端源码"><!--[--><!--]--> 前端源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://gitee.com/herodotus/herodotus-cloud-athena" rel="noopener noreferrer" target="_blank" aria-label="单体版源码"><!--[--><!--]--> 单体版源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Github"><span class="title">Github</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Github"><span class="title">Github</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://github.com/herodotus-cloud/eurynome-cloud" rel="noopener noreferrer" target="_blank" aria-label="后端源码"><!--[--><!--]--> 后端源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://github.com/herodotus-cloud/eurynome-cloud-ui" rel="noopener noreferrer" target="_blank" aria-label="前端源码"><!--[--><!--]--> 前端源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://github.com/herodotus-cloud/herodotus-cloud-athena" rel="noopener noreferrer" target="_blank" aria-label="单体版源码"><!--[--><!--]--> 单体版源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/eurynome-cloud/documents/" class="nav-link router-link-active" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/eurynome-cloud/documents-athena/" class="nav-link" aria-label="单体版"><!--[--><!--]--> 单体版 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/eurynome-cloud/microservices/" class="nav-link" aria-label="微服务技术栈"><!--[--><!--]--> 微服务技术栈 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="了解更多"><span class="title">了解更多</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="了解更多"><span class="title">了解更多</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>延伸</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/eurynome-cloud/basic-knowledge/" class="nav-link" aria-label="了解基础知识"><!--[--><!--]--> 了解基础知识 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>帮助</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a class="nav-link external" href="https://gitee.com/herodotus/eurynome-cloud/issues" rel="noopener noreferrer" target="_blank" aria-label="我要提问"><!--[--><!--]--> 我要提问 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/eurynome-cloud/others/README.md" class="nav-link" aria-label="常见问题"><!--[--><!--]--> 常见问题 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/eurynome-cloud/others/更新日志.md" class="nav-link" aria-label="更新日志"><!--[--><!--]--> 更新日志 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a class="nav-link external" href="https://jq.qq.com/?_wv=1027&amp;k=bIerJVy8" rel="noopener noreferrer" target="_blank" aria-label="加入QQ群"><!--[--><!--]--> 加入QQ群 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Gitee"><span class="title">Gitee</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Gitee"><span class="title">Gitee</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://gitee.com/herodotus/eurynome-cloud" rel="noopener noreferrer" target="_blank" aria-label="后端源码"><!--[--><!--]--> 后端源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://gitee.com/herodotus/eurynome-cloud-ui" rel="noopener noreferrer" target="_blank" aria-label="前端源码"><!--[--><!--]--> 前端源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://gitee.com/herodotus/herodotus-cloud-athena" rel="noopener noreferrer" target="_blank" aria-label="单体版源码"><!--[--><!--]--> 单体版源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Github"><span class="title">Github</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Github"><span class="title">Github</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://github.com/herodotus-cloud/eurynome-cloud" rel="noopener noreferrer" target="_blank" aria-label="后端源码"><!--[--><!--]--> 后端源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://github.com/herodotus-cloud/eurynome-cloud-ui" rel="noopener noreferrer" target="_blank" aria-label="前端源码"><!--[--><!--]--> 前端源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://github.com/herodotus-cloud/herodotus-cloud-athena" rel="noopener noreferrer" target="_blank" aria-label="单体版源码"><!--[--><!--]--> 单体版源码 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">指南</p><ul class=""><li><!--[--><a href="/eurynome-cloud/documents/" class="nav-link router-link-active sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/eurynome-cloud/documents/%E5%BF%AB%E9%80%9F%E4%BA%86%E8%A7%A3.html" class="nav-link sidebar-item" aria-label="快速了解"><!--[--><!--]--> 快速了解 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/eurynome-cloud/documents/%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D.html" class="nav-link sidebar-item" aria-label="项目介绍"><!--[--><!--]--> 项目介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/eurynome-cloud/documents/%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2.html" class="nav-link sidebar-item" aria-label="环境部署"><!--[--><!--]--> 环境部署 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">后端手册</p><ul class=""><li><!--[--><a href="/eurynome-cloud/documents/%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96.html" class="nav-link sidebar-item" aria-label="数据初始化"><!--[--><!--]--> 数据初始化 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="更换数据库"><!--[--><!--]--> 更换数据库 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#为什么默认使用postgresql数据库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="为什么默认使用PostgreSQL数据库？"><!--[--><!--]--> 为什么默认使用PostgreSQL数据库？ <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#postgresql-vs-mysql" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="PostgreSQL VS MySQL"><!--[--><!--]--> PostgreSQL VS MySQL <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#postgresql相对于mysql的优势" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="PostgreSQL相对于MySQL的优势"><!--[--><!--]--> PostgreSQL相对于MySQL的优势 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#mysql相对于postgresql的优势" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="MySQL相对于PostgreSQL的优势"><!--[--><!--]--> MySQL相对于PostgreSQL的优势 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#总结" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#spring-boot-starter-data-jpa-更换数据库方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="spring-boot-starter-data-jpa 更换数据库方式"><!--[--><!--]--> spring-boot-starter-data-jpa 更换数据库方式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#eurynome-cloud-更换数据库方式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Eurynome Cloud 更换数据库方式"><!--[--><!--]--> Eurynome Cloud 更换数据库方式 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#步骤一-判断是否需要添加数据库方言配置" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="步骤一：判断是否需要添加数据库方言配置"><!--[--><!--]--> 步骤一：判断是否需要添加数据库方言配置 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#步骤二-修改环境参数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="步骤二：修改环境参数"><!--[--><!--]--> 步骤二：修改环境参数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#步骤三-修改pom-xml" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="步骤三：修改pom.xml"><!--[--><!--]--> 步骤三：修改pom.xml <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#步骤四-添加数据库jdbc-driver" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="步骤四：添加数据库JDBC Driver"><!--[--><!--]--> 步骤四：添加数据库JDBC Driver <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/eurynome-cloud/documents/%E6%9B%B4%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93.html#步骤五-编译工程代码" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="步骤五：编译工程代码"><!--[--><!--]--> 步骤五：编译工程代码 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/eurynome-cloud/documents/%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html" class="nav-link sidebar-item" aria-label="多环境配置"><!--[--><!--]--> 多环境配置 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/eurynome-cloud/documents/%E6%96%B0%E5%BB%BA%E5%AD%90%E6%A8%A1%E5%9D%97.html" class="nav-link sidebar-item" aria-label="新建子模块"><!--[--><!--]--> 新建子模块 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">前端手册</p><ul class=""><li><!--[--><a href="/eurynome-cloud/documents/%E5%89%8D%E7%AB%AF%E6%89%8B%E5%86%8C.html" class="nav-link sidebar-item" aria-label="前端手册"><!--[--><!--]--> 前端手册 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="更换数据库" tabindex="-1"><a class="header-anchor" href="#更换数据库" aria-hidden="true">#</a> 更换数据库</h1><h2 id="为什么默认使用postgresql数据库" tabindex="-1"><a class="header-anchor" href="#为什么默认使用postgresql数据库" aria-hidden="true">#</a> 为什么默认使用PostgreSQL数据库？</h2><h3 id="postgresql-vs-mysql" tabindex="-1"><a class="header-anchor" href="#postgresql-vs-mysql" aria-hidden="true">#</a> PostgreSQL VS MySQL</h3><p><img src="/eurynome-cloud/images/database/my-sql-vs-postgre-sql-compressed.jpg" alt="PostgreSQL VS MySQL"></p><p>MySQL的背后是一个成熟的商业公司，而PostgreSQL的背后是一个庞大的志愿开发组。这使得MySQL的开发过程更为慎重，而PostgreSQL的反应更为迅速。这样的两种背景直接导致了各自固有的优点和缺点。</p><p><strong>MySQL</strong></p><p>MySQL声称自己是最流行的开源数据库。LAMP中的M指的就是MySQL。构建在LAMP上的应用都会使用MySQL，如WordPress、Drupal等大多数php开源程序。MySQL最初是由MySQL AB开发的，然后在2008年以10亿美金的价格卖给了Sun公司，Sun公司又在2010年被Oracle收购。Oracle支持MySQL的多个版本：Standard、Enterprise、Classic、Cluster、Embedded与Community。其中有一些是免费下载的，另外一些则是收费的。其核心代码基于GPL许可，由于MySQL被控制在Oracle，社区担心会对MySQL的开源会有影响，所以开发了一些分支，比如： MariaDB和Percona。</p><p><strong>PostgreSQL</strong></p><p>PostgreSQL标榜自己是世界上最先进的开源数据库。PostgreSQL的一些粉丝说它能与Oracle相媲美，而且没有那么昂贵的价格和傲慢的客服。最初是1985年在加利福尼亚大学伯克利分校开发的，作为Ingres数据库的后继。PostgreSQL是完全由社区驱动的开源项目。它提供了单个完整功能的版本，而不像MySQL那样提供了多个不同的社区版、商业版与企业版。PostgreSQL基于自由的BSD/MIT许可，组织可以使用、复制、修改和重新分发代码，只需要提供一个版权声明即可。</p><h3 id="postgresql相对于mysql的优势" tabindex="-1"><a class="header-anchor" href="#postgresql相对于mysql的优势" aria-hidden="true">#</a> PostgreSQL相对于MySQL的优势</h3><ol><li><strong>不仅仅是关系型数据库</strong></li></ol><p>除了存储正常的数据类型外，还支持存储：</p><ul><li>array，不管是一位数组还是多为数组均支持</li><li>json(hStore)和jsonb，相比使用text存储接送要高效很多</li><li>json和jsonb之间的区别</li></ul><p>jsonb和json在更高的层面上看起来几乎是一样的，但在存储实现上是不同的。</p><ul><li>json存储完的文本，json列会每次都解析存储的值，它不支持索引，但你可以为查询创建表达式索引。</li><li>jsonb存储的二进制格式，避免了重新解析数据结构。它支持索引，这意味着你可以不使用指定的索引就能查询任何路径。</li></ul><p>当我们比较写入数据速度时，由于数据存储的方式的原因，jsonb会比json稍微的慢一点。json列会每次都解析存储的值，这意味着键的顺序要和输入的时候一样。但jsonb不同，以二进制格式存储且不保证键的顺序。因此，如果你有软件需要依赖键的顺序，jsonb可能不是你的应用的最佳选择。使用jsonb的优势还在于你可以轻易的整合关系型数据和非关系型数据， PostgreSQL对于mongodb这类的基于文档的数据库是个不小的威胁，毕竟如果一个表中只有一列数据的类型是半结构化的，没有必要为了迁就它而整个表的设计采用schemaless的结构。</p><ol start="2"><li><strong>支持地理信息处理扩展</strong></li></ol><p>PostGIS 为PostgreSQL提供了存储空间地理数据的支持，使PostgreSQL成为了一个空间数据库，能够进行空间数据管理、数量测量与几何拓扑分析。在功能上，和MYSQL对比，PostGIS具有下列优势：</p><p>O2O业务场景中的LBS业务使用PostgreSQL + PostGIS有无法比拟的优势。</p><ol start="3"><li><strong>可以快速构建REST API</strong></li></ol><p>PostgREST 可以方便的为任何 PostgreSQL 数据库提供完全的 RESTful API 服务。</p><ol start="4"><li><strong>支持树状结构</strong></li></ol><p>支持R-trees这样可扩展的索引类型，可以更方便地处理一些特殊数据。MySQL 处理树状的设计会很复杂, 而且需要写很多代码, 而 PostgreSQL 可以高效处理树结构。</p><ol start="5"><li><strong>有极其强悍的 SQL 编程能力</strong></li></ol><p>支持递归，有非常丰富的统计函数和统计语法支持。</p><p>MySQL：支持 CREATE PROCEDURE 和 CREATE FUNCTION 语句。存储过程可以用 SQL 和 C++ 编写。用户定义函数可以用 SQL、C 和 C++ 编写。 PostgreSQL：没有单独的存储过程，都是通过函数实现的。用户定义函数可以用 PL/pgSQL(专用的过程语言)、PL/Tcl、PL/Perl、PL/Python 、SQL 和 C 编写。</p><ol start="6"><li><strong>外部数据源支持</strong></li></ol><p>可以把 70 种外部数据源 (包括 Mysql, Oracle, CSV, hadoop …) 当成自己数据库中的表来查询。Postgres有一个针对这一难题的解决方案：一个名为“外部数据封装器(Foreign Data Wrapper，FDW)”的特性。该特性最初由PostgreSQL社区领袖Dave Page四年前根据SQL标准SQL/MED(SQL Management of External Data)开发。FDW提供了一个SQL接口，用于访问远程数据存储中的远程大数据对象，使DBA可以整合来自不相关数据源的数据，将它们存入Postgres数据库中的一个公共模型。这样，DBA就可以访问和操作其它系统管理的数据，就像在本地Postgres表中一样。例如，使用FDW for MongoDB，数据库管理员可以查询来自文档数据库的数据，并使用SQL将它与来自本地Postgres表的数据相关联。借助这种方法，用户可以将数据作为行、列或JSON文档进行查看、排序和分组。他们甚至可以直接从Postgres向源文档数据库写入(插入、更细或删除)数据，就像一个一体的无缝部署。也可以对Hadoop集群或MySQL部署做同样的事。FDW使Postgres可以充当企业的中央联合数据库或“Hub”。</p><ol start="7"><li><strong>没有字符串长度限制</strong></li></ol><p>一般关系型数据库的字符串有限定长度8k左右，无限长 TEXT 类型的功能受限，只能作为外部大数据访问。而PostgreSQL的 TEXT 类型可以直接访问，SQL语法内置正则表达式，可以索引，还可以全文检索，或使用xml xpath。MySQL 的各种text字段有不同的限制，要手动区分 small text, middle text, large text… PostgreSQL 没有这个限制，text 能支持各种大小。</p><ol start="8"><li><strong>支持图结构数据存储</strong></li></ol><p>没有具体使用过，具体可以自己搜索下。<a href="https://mp.weixin.qq.com/s/cjor82wgDu5gzDvTYpLDWw" target="_blank" rel="noopener noreferrer">参考链接<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><ol start="9"><li><strong>支持窗口函数</strong></li></ol><p>窗口函数提供跨行相关的当前查询行集执行计算的能力。仅当调用跟着OVER子句的聚集函数，作为窗口函数;否则它们作为常规的聚合函数。窗口也是一种分组，但和 group by 的分组不同。窗口，可以提供分组之外，还可以执行对每个窗口进行计算。可以想象成是group by 后，然后对每个分组进行计算，而不像Group by ，只是单纯地分组。MySQL 不支持 OVER 子句, 而PostgreSQL支持。OVER 子句能简单的解决 “每组取 top 5” 的这类问题。MySQL支持的SQL语法(ANSI SQL标准)的很小一部分。不支持递归查询、通用表表达式(Oracle的with 语句)或者窗口函数(分析函数)。</p><ol start="10"><li><strong>对索引的支持更强</strong></li></ol><p>PostgreSQL 的可以使用函数和条件索引，这使得PostgreSQL数据库的调优非常灵活，mysql就没有这个功能，条件索引在web应用中很重要。对于索引类型：</p><p>MySQL：取决于存储引擎。MyISAM：BTREE，InnoDB：BTREE。 PostgreSQL：支持 B-树、哈希、R-树和 Gist 索引。 InnoDB的表和索引都是按相同的方式存储。也就是说表都是索引组织表。这一般要求主键不能太长而且插入时的主键最好是按顺序递增，否则对性能有很大影响。PostgreSQL不存在这个问题。</p><p>索引类型方面，MySQL取决于存储引擎。MyISAM：BTREE，InnoDB：B+TREE。PostgreSQL支持 B-树、哈希、R-树和 Gist 索引。</p><ol start="11"><li><strong>集群支持更好</strong></li></ol><p>Mysql Cluster可能与你的想象有较大差异。开源的cluster软件较少。复制(Replication)功能是异步的并且有很大的局限性。例如，它是单线程的(single-threaded)，因此一个处理能力更强的Slave的恢复速度也很难跟上处理能力相对较慢的Master。</p><p>PostgreSQL有丰富的开源cluster软件支持。plproxy 可以支持语句级的镜像或分片，slony 可以进行字段级的同步设置，standby 可以构建WAL文件级或流式的读写分离集群，同步频率和集群策略调整方便，操作非常简单。</p><p>另外，PostgreSQL的主备复制属于物理复制，相对于MySQL基于binlog的逻辑复制，数据的一致性更加可靠，复制性能更高，对主机性能的影响也更小。对于WEB应用来说，复制的特性很重要，mysql到现在也是异步复制，pgsql可以做到同步，异步，半同步复制。还有mysql的同步是基于binlog复制，类似oracle golden gate,是基于stream的复制，做到同步很困难，这种方式更加适合异地复制，pgsql的复制基于wal，可以做到同步复制。同时，pgsql还提供stream复制。</p><ol start="12"><li><strong>事务隔离做的更好</strong></li></ol><p>MySQL 的事务隔离级别 repeatable read 并不能阻止常见的并发更新, 得加锁才可以, 但悲观锁会影响性能, 手动实现乐观锁又复杂. 而 PostgreSQL 的列里有隐藏的乐观锁 version 字段, 默认的 repeatable read 级别就能保证并发更新的正确性, 并且又有乐观锁的性能。</p><ol start="13"><li><strong>对于字符支持更好一些</strong></li></ol><p>MySQL 里需要 utf8mb4 才能显示 emoji 的坑, PostgreSQL 没这个坑。</p><ol start="14"><li><strong>对表连接支持较完整</strong></li></ol><p>对表连接支持较完整，MySQL只有一种表连接类型:嵌套循环连接(nested-loop),不支持排序-合并连接(sort-merge join)与散列连接(hash join)。PostgreSQL都支持。</p><ol start="15"><li><strong>存储方式支持更大的数据量</strong></li></ol><p>PostgreSQL主表采用堆表存放，MySQL采用索引组织表，能够支持比MySQL更大的数据量。</p><ol start="16"><li><strong>时间精度更高</strong></li></ol><p>MySQL对于时间、日期、间隔等时间类型没有秒以下级别的存储类型，而PostgreSQL可以精确到秒以下。</p><ol start="17"><li><strong>优化器的功能较完整</strong></li></ol><p>MySQL对复杂查询的处理较弱，查询优化器不够成熟，explain看执行计划的结果简单。性能优化工具与度量信息不足。</p><p>PostgreSQL很强大的查询优化器，支持很复杂的查询处理。explain返回丰富的信息。提供了一些性能视图，可以方便的看到发生在一个表和索引上的select、delete、update、insert统计信息，也可以看到cache命中率。网上有一个开源的pgstatspack工具。</p><ol start="18"><li><strong>序列支持更好</strong></li></ol><p>MySQL 不支持多个表从同一个序列中取 id, 而 PostgreSQL 可以。</p><ol start="19"><li><strong>对子查询支持更好</strong></li></ol><p>对子查询的支持。虽然在很多情况下在SQL语句中使用子查询效率低下，而且绝大多数情况下可以使用带条件的多表连接来替代子查询，但是子查询的存在在很多时候仍然不可避免。而且使用子查询的SQL语句与使用带条件的多表连接相比具有更高的程序可读性。几乎任何数据库的子查询 (subquery) 性能都比 MySQL 好。</p><ol start="20"><li><strong>增加列更加简单</strong></li></ol><p>MySQL表增加列，基本上是重建表和索引，会花很长时间。PostgreSQL表增加列，只是在数据字典中增加表定义，不会重建表.</p><h3 id="mysql相对于postgresql的优势" tabindex="-1"><a class="header-anchor" href="#mysql相对于postgresql的优势" aria-hidden="true">#</a> MySQL相对于PostgreSQL的优势</h3><ol><li><strong>MySQL比PostgreSQL更流行</strong></li></ol><p>流行对于一个商业软件来说，也是一个很重要的指标，流行意味着更多的用户，意味着经受了更多的考验，意味着更好的商业支持、意味着更多、更完善的文档资料。易用，很容易安装。第三方工具，包括可视化工具，让用户能够很容易入门。</p><ol start="2"><li><strong>回滚实现更优</strong></li></ol><p>innodb的基于回滚段实现的MVCC机制，相对PG新老数据一起存放的基于XID的MVCC机制，是占优的。新老数据一起存放，需要定时触发VACUUM，会带来多余的IO和数据库对象加锁开销，引起数据库整体的并发能力下降。而且VACUUM清理不及时，还可能会引发数据膨胀。</p><ol start="3"><li><strong>在Windows上运行更可靠</strong></li></ol><p>与PostgreSQL相比，MySQL更适宜在Windows环境下运行。MySQL作为一个本地的Windows应用程序运行(在 NT/Win2000/WinXP下，是一个服务)，而PostgreSQL是运行在Cygwin模拟环境下。PostgreSQL在Windows下运行没有MySQL稳定，应该是可以想象的。</p><ol start="4"><li><strong>线程模式相比进程模式的优势</strong></li></ol><p>MySQL使用了线程，而PostgreSQL使用的是进程。在不同线程之间的环境转换和访问公用的存储区域显然要比在不同的进程之间要快得多。</p><p>进程模式对多CPU利用率比较高。进程模式共享数据需要用到共享内存，而线程模式数据本身就是在进程空间内都是共享的，不同线程访问只需要控制好线程之间的同步。 线程模式对资源消耗比较少。所以MySQL能支持远比PostgreSQL多的更多的连接。但PostgreSQL中有优秀的连接池软件软件，如pgbouncer和pgpool，所以通过连接池也可以支持很多的连接。</p><ol start="5"><li><strong>权限设置上更加完善</strong></li></ol><p>MySQL在权限系统上比PostgreSQL某些方面更为完善。PostgreSQL只支持对于每一个用户在一个数据库上或一个数据表上的 INSERT、SELECT和UPDATE/DELETE的授权，而MySQL允许你定义一整套的不同的数据级、表级和列级的权限。对于列级的权限， PostgreSQL可以通过建立视图，并确定视图的权限来弥补。MySQL还允许你指定基于主机的权限，这对于目前的PostgreSQL是无法实现的，但是在很多时候，这是有用的。</p><ol start="6"><li><strong>存储引擎插件化机制</strong></li></ol><p>MySQL的存储引擎插件化机制，使得它的应用场景更加广泛，比如除了innodb适合事务处理场景外，myisam适合静态数据的查询场景。</p><ol start="7"><li><strong>适应24/7运行</strong></li></ol><p>MySQL可以适应24/7运行。在绝大多数情况下，你不需要为MySQL运行任何清除程序。PostgreSQL目前仍不完全适应24/7运行，这是因为你必须每隔一段时间运行一次VACUUM。</p><ol start="8"><li><strong>更加试用于简单的场景</strong></li></ol><p>PostgreSQL只支持堆表，不支持索引组织表，Innodb只支持索引组织表。</p><ul><li>索引组织表的优势：表内的数据就是按索引的方式组织，数据是有序的，如果数据都是按主键来访问，那么访问数据比较快。而堆表，按主键访问数据时，是需要先按主键索引找到数据的物理位置。</li><li>索引组织表的劣势：索引组织表中上再加其它的索引时，其它的索引记录的数据位置不再是物理位置，而是主键值，所以对于索引组织表来说，主键的值不能太大，否则占用的空间比较大。</li></ul><p>对于索引组织表来说，如果每次在中间插入数据，可能会导致索引分裂，索引分裂会大大降低插入的性能。所以对于使用innodb来说，我们一般最好让主键是一个无意义的序列，这样插入每次都发生在最后，以避免这个问题。 由于索引组织表是按一个索引树，一般它访问数据块必须按数据块之间的关系进行访问，而不是按物理块的访问数据的，所以当做全表扫描时要比堆表慢很多，这可能在OLTP中不明显，但在数据仓库的应用中可能是一个问题。</p><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><p>MySQL从一开始就没有打算做所有事情，因而它在功能方面有一定的局限性，并不能满足一些先进应用程序的要求。MySQL对某些功能(例如引用、事务、审计等)的实现方式使得它与其他的关系型数据库相比缺少了一些可靠性。对于简单繁重的读取操作，使用PostgreSQL可能有点小题大做，同时性能也比MySQL这样的同类产品要差。除非你需要绝对的数据完整性，ACID遵从性或者设计复杂，否则PostgreSQL对于简单的场景而言有点多余。</p><p>如何你确定只在MySQL和PostgreSQL中进行选择，以下规则总是有效的：</p><ul><li>如果你的操作系统是Windows，你应该使用MySQL。</li><li>当绝对需要可靠性和数据完整性的时候，PostgreSQL是更好的选择。</li><li>如果需要数据库执行定制程序，那么可扩展的PostgreSQL是更好的选择。</li><li>你的应用处理的是地理数据，由于R-TREES的存在，你应该使用PostgreSQL。</li><li>如果你对数据库并不了十分了解，甚至不知道事务、存储过程等究竟是什么，你应该使用MySQL。</li></ul><h2 id="spring-boot-starter-data-jpa-更换数据库方式" tabindex="-1"><a class="header-anchor" href="#spring-boot-starter-data-jpa-更换数据库方式" aria-hidden="true">#</a> spring-boot-starter-data-jpa 更换数据库方式</h2><p>由于基础核心数据访问层使用<code>spring-boot-starter-data-jpa</code>组件，<code>JPA</code>是标准，<code>Spring Data JPA</code>默认使用<code>Hibernate</code>作为JPA实现，因此天然支持不同类型的数据库。</p><p>既然<code>Spring Data JPA</code>天然支持不同类型数据库，那么通过修改<code>spring-boot-starter-data-jpa</code>对应的配置参数就可以更换数据库。</p><p>假设只是单纯的使用<code>spring-boot-starter-data-jpa</code>，那么更换数据库就仅需要修改以下配置。</p><table><thead><tr><th>配置</th><th>说明</th></tr></thead><tbody><tr><td>spring.datasource.driver-class-name</td><td>数据库Driver Class，不同的数据库驱动不同</td></tr><tr><td>spring.datasource.url</td><td>数据库访问连接，不同数据连接格式也不同</td></tr><tr><td>spring.datasource.username</td><td>数据库访问用户名，如果相同可以不用修改</td></tr><tr><td>spring.datasource.password</td><td>数据库访问密码，如果相同可以不用修改</td></tr><tr><td>spring.jpa.database</td><td>选择数据库类型，具体类型与枚举<code>org.springframework.orm.jpa.vendor.Database</code>中的值对应，使用小写值即可</td></tr><tr><td>spring.jpa.properties.hibernate.dialect</td><td>选择数据库类型对应的dialect，在 <code>org.hibernate.dialect</code> 包下可以找到具体数据库对应的dialect</td></tr><tr><td>spring.jpa.hibernate.ddl-auto</td><td>设置hibernate初始化操作的类型，具体参见下表</td></tr></tbody></table><p><code>spring.jpa.hibernate.ddl-auto</code> 属性和含义见下表：</p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td><code>create</code></td><td>每次加载hibernate时都会删除上一次的生成的表，再重新根据model生成表，因此可能会导致数据丢失。</td></tr><tr><td><code>create-drop</code></td><td>每次加载hibernate时根据model类生成表，但是sessionFactory一关闭，表就自动删除。</td></tr><tr><td><code>update</code></td><td>最常用的属性，第一次加载hibernate时根据model类会自动建立起表的结构（前提是先建立好数据库），以后加载hibernate时根据 model类自动更新表结构，原有数据不会清空，只会更新。</td></tr><tr><td><code>validate</code></td><td>每次加载hibernate时，会校验数据与数据库的字段类型是否相同，字段不同会报错。</td></tr><tr><td><code>none</code></td><td>不进行任何操作</td></tr></tbody></table><p>如果想要使用<code>spring-boot-starter-data-jpa</code>提供SQL自动初始化机制，那么还需要额外修改以下配置：</p><table><thead><tr><th>配置</th><th>说明</th></tr></thead><tbody><tr><td>spring.sql.init.platform</td><td>数据库类型，主要用于在data-locations 和 schema-locations 中定位不同数据库的脚本, schema-${platform}.sql and data-${platform}.sql。具体值标准情况与spring.jpa.database值相同，当然也可以自定义，注意该值与具体*.sql文件名的对应。</td></tr><tr><td>spring.sql.init.data-locations</td><td>DML SQL文件路径</td></tr><tr><td>spring.sql.init.data-locations</td><td>DDL SQL文件路径</td></tr></tbody></table><h2 id="eurynome-cloud-更换数据库方式" tabindex="-1"><a class="header-anchor" href="#eurynome-cloud-更换数据库方式" aria-hidden="true">#</a> Eurynome Cloud 更换数据库方式</h2><p><strong>Eurynome Cloud</strong> 更换数据库需要修改的参数与<code>spring-boot-starter-data-jpa</code> 更换数据库需要修改的参数完全一致。</p><p><strong>Eurynome Cloud</strong> 配置参数与<code>spring-boot-starter-data-jpa</code>配置参数对应关系如下表：</p><table><thead><tr><th>配置</th><th>对应</th></tr></thead><tbody><tr><td>herodotus.database-information.driver-class-name</td><td>spring.datasource.driver-class-name</td></tr><tr><td>herodotus.database-information.url</td><td>spring.datasource.url</td></tr><tr><td>herodotus.environment.database.username</td><td>spring.datasource.username</td></tr><tr><td>herodotus.environment.database.password</td><td>spring.datasource.password</td></tr><tr><td>herodotus.database-information.platform</td><td>spring.jpa.database</td></tr><tr><td>herodotus.environment.database.dialect</td><td>spring.jpa.properties.hibernate.dialect</td></tr><tr><td>herodotus.switch.database.ddl-auto</td><td>spring.jpa.hibernate.ddl-auto</td></tr></tbody></table><h3 id="步骤一-判断是否需要添加数据库方言配置" tabindex="-1"><a class="header-anchor" href="#步骤一-判断是否需要添加数据库方言配置" aria-hidden="true">#</a> 步骤一：判断是否需要添加数据库方言配置</h3><p><strong>Eurynome Cloud</strong> 使用数据库&quot;方言&quot;配置模式，以达到规范化数据库配置、减少参数修改、快速更换数据库的目的。</p><p>目前，Eurynome Cloud 默认提供<code>postgresql</code>和<code>mysql8</code>两种方言配置。在Nacos的配置中可以找到<code>eurynome-cloud-database-postgresql.yaml</code>和<code>eurynome-cloud-database-mysql8.yaml</code>与之对应。具体配置格式如下：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">herodotus</span><span class="token punctuation">:</span>
  <span class="token key atrule">database-information</span><span class="token punctuation">:</span>
    <span class="token key atrule">platform</span><span class="token punctuation">:</span> postgresql
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> org.postgresql.Driver
    <span class="token key atrule">dialect</span><span class="token punctuation">:</span> org.hibernate.dialect.PostgreSQL10Dialect
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>postgresql<span class="token punctuation">:</span>//$<span class="token punctuation">{</span>herodotus.environment.database.host<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>herodotus.environment.database.port<span class="token punctuation">}</span>/$<span class="token punctuation">{</span>herodotus.environment.database.name<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果你所使用的数据库，<code>postgresql</code>和<code>mysql8</code>两种方言配置并不能满足，那么请按照下面几步操作；如果能满足请跳过。</p><ul><li>在Nacos中新建一个按照格式<code>eurynome-cloud-database-&lt;database.type&gt;.yaml</code>命名的配置。</li><li>复制上面的配置内容到该配置中，注意不要改变格式以及具体配置名。</li><li>根据自己使用的数据库，修改相关的信息。</li></ul><div class="custom-container tip"><p class="custom-container-title">说明</p><p>eurynome-cloud-database-&lt;database.type&gt;.yaml中，主要包含针对不同类型数据库，所使用的JDBC Driver配置信息。</p><ul><li>platform：指定数据库类型。</li></ul><blockquote><p>注意：platform具体值来源于枚举类<code>org.springframework.orm.jpa.vendor.Database</code>，请使用全部小写字母值进行配置。这个值不分版本，所以mysql5数据库和mysql8数据库均是使用<code>mysql</code>，目前支持的值如下： DB2、DERBY、H2、HANA、HSQL、INFORMIX、MYSQL、ORACLE、POSTGRESQL、SQL_SERVER、SYBASE</p></blockquote><ul><li>driver-class-name：数据库驱动类名。</li><li>dialect: 指定Hibernate针对不同的数据库的Dialect，org.hibernate.dialect 包下可以找到具体数据库对应的dialect。</li><li>url：数据库连接URL。</li></ul><blockquote><p>注意：这里的的URL是通过配置*-environment.yaml，中的herodotus.environment.database.host、port、name等三个值组装而成。如果新增方言配置，不管具体数据库URL内容是什么，一定确保数据库地址、端口、数据库名使用${herodotus.environment.database.host}、${herodotus.environment.database.port}、${herodotus.environment.database.name}三个站位符替换，否则*-environment.yaml中配置的值将不再生效。</p></blockquote></div><h3 id="步骤二-修改环境参数" tabindex="-1"><a class="header-anchor" href="#步骤二-修改环境参数" aria-hidden="true">#</a> 步骤二：修改环境参数</h3><p>在根据你所使用的<a href="/eurynome-cloud/documents/%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html" class="">Maven多环境</a>，找到Nacos对应Group下的<code>eurynome-cloud-environment.yaml</code>配置，修改数据库相关的host、port、name、username、password等几个参数的值。</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">herodotus</span><span class="token punctuation">:</span>
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token key atrule">logstash-server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">5044</span>
    <span class="token key atrule">gateway-server-addr</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8847</span>
    <span class="token key atrule">database</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5432</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> herodotus
      <span class="token key atrule">username</span><span class="token punctuation">:</span> XXXXX
      <span class="token key atrule">password</span><span class="token punctuation">:</span> XXXXX
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="步骤三-修改pom-xml" tabindex="-1"><a class="header-anchor" href="#步骤三-修改pom-xml" aria-hidden="true">#</a> 步骤三：修改pom.xml</h3><p>找到工程根目录下的<code>pom.xml</code>, 根据你所使用的<a href="/eurynome-cloud/documents/%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html" class="">Maven多环境</a>找到对应的<code>&lt;profiles&gt;</code>, 修改<code>&lt;database.type&gt;</code>属性值。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>database.type</span><span class="token punctuation">&gt;</span></span>postgresql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>database.type</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在Maven编译的过程中，<code>&lt;database.type&gt;</code>的值会作为参数传递到各个服务的<code>boostrap.yml</code>配置中，与<code>boostrap.yml</code>中已有的信息拼装成Nacos中对应的配置名。通过这种方式实现Maven多环境、Nacos配置、不同数据库配置的联动</p></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">data-id</span><span class="token punctuation">:</span> eurynome<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>database<span class="token punctuation">-</span>@database.type@.yaml
  <span class="token key atrule">group</span><span class="token punctuation">:</span> common
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="步骤四-添加数据库jdbc-driver" tabindex="-1"><a class="header-anchor" href="#步骤四-添加数据库jdbc-driver" aria-hidden="true">#</a> 步骤四：添加数据库JDBC Driver</h3><p>目前，系统代码已经包含<strong>PostgreSQL</strong>、<strong>MySQL8</strong>和<strong>H2</strong>三种数据库的<strong>JDBC Driver</strong>, 如果你使用数据库不在此范围内，那么就需要在代码包<code>eurynome-cloud-data</code>的<code>pom.xml</code>中添加对应数据库的<strong>JDBC Driver</strong>。</p><h3 id="步骤五-编译工程代码" tabindex="-1"><a class="header-anchor" href="#步骤五-编译工程代码" aria-hidden="true">#</a> 步骤五：编译工程代码</h3><p>以上步骤完成之后，使用<code>mvn package</code>或<code>mvn install</code>命令，重新编译工程。</p><div class="custom-container danger"><p class="custom-container-title">注意</p><p>这一步非常重要，因为<code>Maven</code>无法真正做到与<code>yml</code>配置文件的传参，只有通过编译，在编译过程中用<code>pom.xml</code>中<code>&lt;database.type&gt;</code>的值，替换yml配置文件中的<code>@database.type@</code>模拟一种参数传递。</p></div><p>修改配置之后，参考<a href="#%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96">数据初始化</a>章节进行数据库初始化工作。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>目前仅提供<code>PostgreSQL</code>和<code>MySQL</code>两种数据库对应的数据初始化脚本，其它数据库需要自己额外处理。如需要使用Spring Data JPA初始化机制，需要手动修改<code>spring.sql.init.*</code>相关参数。</p></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">更新时间: </span><span class="meta-item-info">2021/9/8 上午12:03:33</span></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: pointer_v@qq.com">herodotus</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/eurynome-cloud/documents/%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96.html" class="nav-link" aria-label="数据初始化"><!--[--><!--]--> 数据初始化 <!--[--><!--]--></a></span><span class="next"><a href="/eurynome-cloud/documents/%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.html" class="nav-link" aria-label="多环境配置"><!--[--><!--]--> 多环境配置 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/eurynome-cloud/assets/js/runtime~app.64d35c83.js" defer></script><script src="/eurynome-cloud/assets/js/567.94e28fdc.js" defer></script><script src="/eurynome-cloud/assets/js/app.a2a09456.js" defer></script>
  </body>
</html>
